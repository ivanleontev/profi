## Задание 2. «Сокращатель ссылок»
Предположим, мы хотим написать свой собственный сокращатель ссылок (такой,
как bit.ly), и попросили вас написать API, который будет реализовывать
основную функциональность сервиса.

Для пользователя должны быть доступны следующие возможности:

1. Создать новую сокращенную ссылку (дать длинную, получить короткую)
2. Перейти по короткой ссылке и быть перенаправленным на исходную длинную ссылку
3. Просмотреть список «своих» ссылок, которые он сокращал
4. Просмотреть статистику переходов по каждой ссылке

### Установка
В папке с корнем проекта 02
```bash
npm install
```

Версии использованного ПО:
- NodeJS v10.16.0
- npm 6.9.0
- MySQL 5.5 (OpenServer)

### Скрипт базы данных в папке проекта - shorten.sql
База была экспортирована из MySQL с настройками: "Быстрый - отображать минимум настроек"

Подключение БД происходит в файле app.js, заменить данные:
```javascript
({
    //17 line
    host: 'localhost', 
    user: 'LOGIN_USER', 
    password: 'PASSWORD_USER', 
    database: 'shorten'
});`
```

```javascript
({
    const port = 3001; // 13 line
    const ip = 'IP_SERVER_OR_LOCALHOST:' + port; //14 line
});`
```

### Запуск

```bash
    node .\app.js
```
OR
```bash
    nodemon .\app.js
```

### Реализация:
В приложении были реализован следующий функицонал:
- сокращение ссылок, при получении ссылки генерируется уникальный ключ keyLen для ссылки с проверкой существующего в БД и сохранением ключа и полной ссылки в БД;
- переход по короткой ссылке и перенаправление на исходную (длинную), происходит поиск в БД уникального ключа ссылки и редирект на исходную (длинную);
- просмотр сокращённых ссылок, данная функция реализуется на основе cookie, пользователь регистрируется в приложении, данные записываются в БД, при очищении кук пользователь не может восстановить сокращённые ссылки;
- пользователю доступно просмотр переходов по короткой ссылке, реализуемый на основе счётчика, который записывается БД, если такой ссылки не существует, приложение направит пользователя на страницу с ошибкой.

За оформление отвечает bootstrap.

##### Ручное тестирование:
- Google Chrome 76.0.3809.132 (Официальная сборка), (64 бит)
- Mozilla Firefox 69.0.1 (64-битный)
- Microsoft EdgeHTML 17.17134
- IE11 11.1006.17134.0

В ходе тестирования обнаружена ошибка функционала в IE, не работает кнопка скопировать.

##### Автоматизированное тестирование:
При автоматизированном нагрузочном тестировании была использована утилита wrk.
Было проведено тестирования с параметром connections  = 300, 600, 2000

При нагрузке в 300 подключений приложение показало:
Средняя задержка: 23.52ms
Запросов в секуду: 10274

При нагрузке в 600 подключений приложение показало:
Средняя задержка: 23.83ms
Запросов в секуду: 10495

При нагрузке в 2000 подключений приложение показало:
Средняя задержка: 22.83ms
Запросов в секуду: 10495

Было увеличено количества подключений с 50 до 300 к БД увеличилось, что позволило увеличить количество запросов на 200 при таких параметрах.
Так же было выявлено оптимальное количество запросов (11000), при разумной задержке (10ms) и подключений (200), так как при увеличении количества подключений, 
запросы перестают увеличиваться, а задержка возрастает практически в 2 раза (18ms).


Как можно ещё расширить приложение:
- функция асинхронного обновления счётчика переходов
- полная регистрация пользователя, используя логин и пароль
- добавление времени жизни ссылки, для уменьшения размера базы данных


